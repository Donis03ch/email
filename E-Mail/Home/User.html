<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webmail Interface</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            height: 100%;
        }
        .container {
            display: flex;
            height: 100%;
        }
        .sidebar {
            width: 200px;
            background-color: #f1f1f1;
            padding: 20px;
        }
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .top-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background-color: #e9e9e9;
        }
        .search-bar {
            flex: 1;
            margin-right: 20px;
        }
        .profile {
            cursor: pointer;
        }
        .inbox, .email-view, .compose-email {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .email-item {
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
            cursor: pointer;
        }
        .new-mail-btn {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            text-decoration: none;
            margin-bottom: 20px;
        }
        .folder {
            padding: 10px;
            cursor: pointer;
        }
        .folder:hover {
            background-color: #ddd;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <a href="#" class="new-mail-btn" onclick="openComposeEmail()">New Mail</a>
            <div class="folder" onclick="showFolder('inbox')">Inbox</div>
            <div class="folder" onclick="showFolder('sent')">Sent</div>
            <div class="folder" onclick="showFolder('drafts')">Drafts</div>
            <div class="folder" onclick="showFolder('trash')">Trash</div>
        </div>
        <div class="main-content">
            <div class="top-bar">
                <div class="search-bar">
                    <input type="text" placeholder="Search..." onkeyup="searchEmails(this.value)">
                </div>
                <div class="profile" onclick="toggleProfileMenu()">
                    ðŸ‘¤ Profile
                </div>
            </div>
            <div id="inbox" class="inbox">
                <h2>Inbox</h2>
                <div class="email-item" onclick="openEmailView('Subject 1', 'Content of email 1', 'sender1@example.com', 'me@example.com')">Subject: Email 1</div>
                <div class="email-item" onclick="openEmailView('Subject 2', 'Content of email 2', 'sender2@example.com', 'me@example.com')">Subject: Email 2</div>
                <div class="email-item" onclick="openEmailView('Subject 3', 'Content of email 3', 'sender3@example.com', 'me@example.com')">Subject: Email 3</div>
            </div>
            <div id="email-view" class="email-view hidden">
                <h2 id="email-subject"></h2>
                <p><strong>From:</strong> <span id="email-sender"></span></p>
                <p><strong>To:</strong> <span id="email-recipient"></span></p>
                <div id="email-body"></div>
                <button onclick="replyToEmail()">Reply</button>
                <button onclick="goBackToInbox()">Back to Inbox</button>
            </div>
            <div id="compose-email" class="compose-email hidden">
                <h2>Compose Email</h2>
                <form onsubmit="sendEmail(event)">
                    <label for="to">To:</label>
                    <input type="email" id="to" name="to" required><br><br>
                    <label for="cc">CC:</label>
                    <input type="email" id="cc" name="cc"><br><br>
                    <label for="subject">Subject:</label>
                    <input type="text" id="subject" name="subject" required><br><br>
                    <label for="body">Body:</label>
                    <textarea id="body" name="body" required></textarea><br><br>
                    <input type="submit" value="Send">
                </form>
            </div>
        </div>
    </div>

    <script>
        function openEmailView(subject, content, sender, recipient) {
            document.getElementById('email-subject').innerText = subject;
            document.getElementById('email-sender').innerText = sender;
            document.getElementById('email-recipient').innerText = recipient;
            document.getElementById('email-body').innerText = content;
            document.getElementById('inbox').classList.add('hidden');
            document.getElementById('email-view').classList.remove('hidden');
        }

        function openComposeEmail() {
            document.getElementById('inbox').classList.add('hidden');
            document.getElementById('email-view').classList.add('hidden');
            document.getElementById('compose-email').classList.remove('hidden');
        }

        function goBackToInbox() {
            document.getElementById('compose-email').classList.add('hidden');
            document.getElementById('email-view').classList.add('hidden');
            document.getElementById('inbox').classList.remove('hidden');
        }

        function replyToEmail() {
            const sender = document.getElementById('email-sender').innerText;
            const subject = document.getElementById('email-subject').innerText;
            document.getElementById('to').value = sender;
            document.getElementById('subject').value = `Re: ${subject}`;
            openComposeEmail();
        }

        function sendEmail(event) {
            event.preventDefault();
            const to = document.getElementById('to').value;
            const cc = document.getElementById('cc').value;
            const subject = document.getElementById('subject').value;
            const body = document.getElementById('body').value;
            console.log(`Sending email to ${to} with subject ${subject} and body ${body}`);
            goBackToInbox();
        }

        function showFolder(folderName) {
            console.log(`Showing ${folderName} folder`);
            // Implement logic to show emails from the selected folder
        }

        function searchEmails(query) {
            console.log(`Searching for: ${query}`);
            // Implement search functionality
        }

        function toggleProfileMenu() {
            console.log('Toggling profile menu');
            // Implement profile menu toggle logic
        }
    



     // Logout
     function logout() {
            fetch('/User.html', {
                method: 'POST',
            })
            .then(response => response.json())
            .then(result => {
                if (result.success) {
                    // Redirect to index.html after successful logout
                    window.location.href = '/index.html';
                } else {
                    alert('Error logging out. Please try again.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while logging out. Please try again.');
            });
        }
</script>

</body>
</html>
